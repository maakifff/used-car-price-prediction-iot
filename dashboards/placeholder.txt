import streamlit as st
import pandas as pd
import pickle

# Load trained model
with open("../models/price_model.pkl", "rb") as f:
    model = pickle.load(f)

st.title("ðŸš— Used Car Price Prediction Dashboard")

st.write("Enter vehicle details to estimate the selling price.")

# User inputs
year = st.number_input("Production Year", min_value=1990, max_value=2025, value=2018)
mileage = st.number_input("Mileage (km)", min_value=0, value=50000)

fuel_type = st.selectbox("Fuel Type", ["Petrol", "Diesel", "Electric", "Hybrid"])
transmission = st.selectbox("Transmission", ["Manual", "Automatic"])

# Create input dataframe
input_data = pd.DataFrame({
    "year": [year],
    "mileage": [mileage],
    "fuel_type": [fuel_type],
    "transmission": [transmission]
})

# One-hot encoding (same as training)
input_data = pd.get_dummies(input_data)

# Align columns with training data
model_features = model.feature_names_in_
input_data = input_data.reindex(columns=model_features, fill_value=0)

# Prediction
if st.button("Predict Price"):
    prediction = model.predict(input_data)[0]
    st.success(f"Estimated Selling Price: {prediction:,.0f} TL")
